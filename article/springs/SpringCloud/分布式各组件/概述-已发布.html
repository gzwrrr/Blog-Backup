<!DOCTYPE html>
<html lang="en-US" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-beta.60" />
    <meta name="theme" content="VuePress Theme Hope" />
    <link rel="icon" href="https://my-photos-1.oss-cn-hangzhou.aliyuncs.com/Individual/logo.png"><link rel="manifest" href="/manifest.webmanifest" crossorigin="use-credentials"><meta name="theme-color" content="#21332d"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover"><link rel="icon" href="/logo.png"><title>组件概述</title><meta name="description" content="组件概述">
    <style>
      :root {
        --bg-color: #fff;
      }

      html[data-theme="dark"] {
        --bg-color: #1d1e1f;
      }

      html,
      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.querySelector("html").setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="preload" href="/assets/style-42911d78.css" as="style"><link rel="stylesheet" href="/assets/style-42911d78.css">
    <link rel="modulepreload" href="/assets/app-f746a503.js"><link rel="modulepreload" href="/assets/framework-ec2af7a3.js"><link rel="modulepreload" href="/assets/概述-已发布.html-87d268a5.js"><link rel="modulepreload" href="/assets/概述-已发布.html-5f3a82e6.js">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="skip-link sr-only">Skip to main content</a><!--]--><!--[--><div class="theme-container has-toc"><!--[--><header class="navbar" id="navbar"><div class="navbar-start"><button class="toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><!----><!--]--><a href="/" class="brand"><!----><!----><!----></a><!--[--><!----><!--]--></div><div class="navbar-center"><!--[--><!----><!--]--><nav class="nav-links"><div class="nav-item hide-in-mobile"><a href="/" class="nav-link" aria-label="主页"><FontIcon icon="zhuye"></FontIcon>主页<!----></a></div><div class="nav-item hide-in-mobile"><a href="/guide/" class="nav-link" aria-label="导航"><FontIcon icon="tubiaozhuanqu-16"></FontIcon>导航<!----></a></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="编程语言"><span class="title"><FontIcon icon="code"></FontIcon>编程语言</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/article/java/" class="nav-link" aria-label="Java"><FontIcon></FontIcon>Java<!----></a></li><li class="dropdown-item"><a href="/article/go/" class="nav-link" aria-label="Go"><FontIcon></FontIcon>Go<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><a href="/article/algorithm/" class="nav-link" aria-label="算法"><FontIcon icon="jichengsuanfa"></FontIcon>算法<!----></a></div><div class="nav-item hide-in-mobile"><a href="/article/springs/" class="nav-link active" aria-label="Springs"><FontIcon icon="bxl-spring-boot"></FontIcon>Springs<!----></a></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="数据库"><span class="title"><FontIcon icon="database-full"></FontIcon>数据库</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/article/mysql/" class="nav-link" aria-label="MySQL"><FontIcon></FontIcon>MySQL<!----></a></li><li class="dropdown-item"><a href="/article/redis/" class="nav-link" aria-label="Redis"><FontIcon></FontIcon>Redis<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="设计"><span class="title"><FontIcon icon="sheji1"></FontIcon>设计</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/article/design/" class="nav-link" aria-label="设计模式"><FontIcon></FontIcon>设计模式<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="中间件"><span class="title"><FontIcon icon="zhongjianjian"></FontIcon>中间件</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/article/rabbitmq/" class="nav-link" aria-label="RabbitMQ"><FontIcon></FontIcon>RabbitMQ<!----></a></li><li class="dropdown-item"><a href="/article/elasticsearch/" class="nav-link" aria-label="ElasticSearch"><FontIcon></FontIcon>ElasticSearch<!----></a></li><li class="dropdown-item"><a href="/article/mongodb/" class="nav-link" aria-label="Mongodb"><FontIcon></FontIcon>Mongodb<!----></a></li><li class="dropdown-item"><a href="/article/netty/" class="nav-link" aria-label="Netty"><FontIcon></FontIcon>Netty<!----></a></li><li class="dropdown-item"><a href="/article/quartz/" class="nav-link" aria-label="Quartz"><FontIcon></FontIcon>Quartz<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="运维"><span class="title"><FontIcon icon="yunwei-yunweirizhi"></FontIcon>运维</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/article/git/" class="nav-link" aria-label="Git"><FontIcon></FontIcon>Git<!----></a></li><li class="dropdown-item"><a href="/article/docker/" class="nav-link" aria-label="Docker"><FontIcon></FontIcon>Docker<!----></a></li><li class="dropdown-item"><a href="/article/jenkins/" class="nav-link" aria-label="Jenkins"><FontIcon></FontIcon>Jenkins<!----></a></li><li class="dropdown-item"><a href="/article/linux/" class="nav-link" aria-label="Linux"><FontIcon></FontIcon>Linux<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><a href="/article/modeling/" class="nav-link" aria-label="数学建模"><FontIcon icon="qita"></FontIcon>数学建模<!----></a></div><div class="nav-item hide-in-mobile"><a href="/article/other/" class="nav-link" aria-label="其他文章"><FontIcon icon="qita"></FontIcon>其他文章<!----></a></div><div class="nav-item hide-in-mobile"><a href="/about/" class="nav-link" aria-label="关于"><FontIcon icon="guanyu1"></FontIcon>关于<!----></a></div></nav><!--[--><!----><!--]--></div><div class="navbar-end"><!--[--><!----><!--]--><!----><!----><div class="nav-item hide-in-mobile"><button class="outlook-button" tabindex="-1" ariahidden="true"><svg xmlns="http://www.w3.org/2000/svg" class="icon outlook-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="outlook icon"><path d="M224 800c0 9.6 3.2 44.8 6.4 54.4 6.4 48-48 76.8-48 76.8s80 41.6 147.2 0 134.4-134.4 38.4-195.2c-22.4-12.8-41.6-19.2-57.6-19.2C259.2 716.8 227.2 761.6 224 800zM560 675.2l-32 51.2c-51.2 51.2-83.2 32-83.2 32 25.6 67.2 0 112-12.8 128 25.6 6.4 51.2 9.6 80 9.6 54.4 0 102.4-9.6 150.4-32l0 0c3.2 0 3.2-3.2 3.2-3.2 22.4-16 12.8-35.2 6.4-44.8-9.6-12.8-12.8-25.6-12.8-41.6 0-54.4 60.8-99.2 137.6-99.2 6.4 0 12.8 0 22.4 0 12.8 0 38.4 9.6 48-25.6 0-3.2 0-3.2 3.2-6.4 0-3.2 3.2-6.4 3.2-6.4 6.4-16 6.4-16 6.4-19.2 9.6-35.2 16-73.6 16-115.2 0-105.6-41.6-198.4-108.8-268.8C704 396.8 560 675.2 560 675.2zM224 419.2c0-28.8 22.4-51.2 51.2-51.2 28.8 0 51.2 22.4 51.2 51.2 0 28.8-22.4 51.2-51.2 51.2C246.4 470.4 224 448 224 419.2zM320 284.8c0-22.4 19.2-41.6 41.6-41.6 22.4 0 41.6 19.2 41.6 41.6 0 22.4-19.2 41.6-41.6 41.6C339.2 326.4 320 307.2 320 284.8zM457.6 208c0-12.8 12.8-25.6 25.6-25.6 12.8 0 25.6 12.8 25.6 25.6 0 12.8-12.8 25.6-25.6 25.6C470.4 233.6 457.6 220.8 457.6 208zM128 505.6C128 592 153.6 672 201.6 736c28.8-60.8 112-60.8 124.8-60.8-16-51.2 16-99.2 16-99.2l316.8-422.4c-48-19.2-99.2-32-150.4-32C297.6 118.4 128 291.2 128 505.6zM764.8 86.4c-22.4 19.2-390.4 518.4-390.4 518.4-22.4 28.8-12.8 76.8 22.4 99.2l9.6 6.4c35.2 22.4 80 12.8 99.2-25.6 0 0 6.4-12.8 9.6-19.2 54.4-105.6 275.2-524.8 288-553.6 6.4-19.2-3.2-32-19.2-32C777.6 76.8 771.2 80 764.8 86.4z"></path></svg><div class="outlook-dropdown"><!----></div></button></div><!--[--><button class="search-pro-button" role="search" aria-label="Search"><svg xmlns="http://www.w3.org/2000/svg" class="icon search-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="search icon"><path d="M192 480a256 256 0 1 1 512 0 256 256 0 0 1-512 0m631.776 362.496-143.2-143.168A318.464 318.464 0 0 0 768 480c0-176.736-143.264-320-320-320S128 303.264 128 480s143.264 320 320 320a318.016 318.016 0 0 0 184.16-58.592l146.336 146.368c12.512 12.48 32.768 12.48 45.28 0 12.48-12.512 12.48-32.768 0-45.28"></path></svg></button><!--]--><!--[--><!----><!--]--><button class="toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span class="button-container"><span class="button-top"></span><span class="button-middle"></span><span class="button-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside class="sidebar" id="sidebar"><!--[--><!----><!--]--><ul class="sidebar-links"><li><!--[--><a href="/article/springs/" class="nav-link sidebar-link sidebar-page" aria-label="Spring 全家桶"><FontIcon></FontIcon>Spring 全家桶<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><FontIcon></FontIcon><span class="title">通用</span><span class="arrow end"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><FontIcon></FontIcon><span class="title">原理</span><span class="arrow end"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable active"><FontIcon></FontIcon><span class="title">Spring Cloud</span><span class="arrow down"></span></button><ul class="sidebar-links"><li><section class="sidebar-group"><button class="sidebar-heading clickable active"><FontIcon></FontIcon><span class="title">分布式各组件</span><span class="arrow down"></span></button><ul class="sidebar-links"><li><!--[--><a href="/article/springs/SpringCloud/%E5%88%86%E5%B8%83%E5%BC%8F%E5%90%84%E7%BB%84%E4%BB%B6/%E5%88%86%E5%B8%83%E5%BC%8F%E6%9E%B6%E6%9E%84%E4%B8%AD%E5%90%84%E7%BB%84%E4%BB%B6%E7%AE%80%E8%BF%B0.html" class="nav-link sidebar-link sidebar-page" aria-label="分布式架构中各组件简述"><FontIcon></FontIcon>分布式架构中各组件简述<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-current="page" href="/article/springs/SpringCloud/%E5%88%86%E5%B8%83%E5%BC%8F%E5%90%84%E7%BB%84%E4%BB%B6/%E6%A6%82%E8%BF%B0-%E5%B7%B2%E5%8F%91%E5%B8%83.html" class="router-link-active router-link-exact-active nav-link active sidebar-link sidebar-page active" aria-label="组件概述"><FontIcon></FontIcon>组件概述<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><FontIcon></FontIcon><span class="title">B 服务调用</span><span class="arrow end"></span></button><!----></section></li></ul></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><FontIcon></FontIcon><span class="title">通用</span><span class="arrow end"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><FontIcon></FontIcon><span class="title">Alibaba</span><span class="arrow end"></span></button><!----></section></li></ul></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><FontIcon></FontIcon><span class="title">Srping Boot</span><span class="arrow end"></span></button><!----></section></li></ul><!--[--><!----><!--]--></aside><!--[--><div><!----><main class="page" id="main-content"><!--[--><!----><nav class="breadcrumb disable"></nav><div class="page-title"><h1><FontIcon icon></FontIcon>组件概述</h1><div class="page-info"><span class="page-author-info" aria-label="Author🖊" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><span class="page-author-item">gzw</span></span><span property="author" content="gzw"></span></span><!----><span class="page-date-info" aria-label="Writing Date📅" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span><!----></span><meta property="datePublished" content="2022-05-28T00:00:00.000Z"></span><!----><span class="page-reading-time-info" aria-label="Reading Time⌛" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>About 10 min</span><meta property="timeRequired" content="PT10M"></span><span class="page-category-info" aria-label="Category🌈" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon category-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="category icon"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zM147.556 553.478H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zM593.927 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zM730.22 920.502H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z"></path></svg><span class="page-category-item category4 clickable" role="navigation">分布式</span><meta property="articleSection" content="分布式"></span><span class="page-tag-info" aria-label="Tag🏷" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon tag-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="tag icon"><path d="M939.902 458.563L910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 000 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z"></path></svg><span class="page-tag-item tag4 clickable" role="navigation">分布式</span><meta property="keywords" content="分布式"></span></div><hr></div><div class="toc-place-holder"><aside id="toc"><div class="toc-header">On This Page<button class="print-button" title="print"><svg xmlns="http://www.w3.org/2000/svg" class="icon print-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="print icon"><path d="M819.2 364.8h-44.8V128c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v236.8h-44.8C145.067 364.8 96 413.867 96 473.6v192c0 59.733 49.067 108.8 108.8 108.8h44.8V896c0 17.067 14.933 32 32 32h460.8c17.067 0 32-14.933 32-32V774.4h44.8c59.733 0 108.8-49.067 108.8-108.8v-192c0-59.733-49.067-108.8-108.8-108.8zM313.6 160h396.8v204.8H313.6V160zm396.8 704H313.6V620.8h396.8V864zM864 665.6c0 25.6-19.2 44.8-44.8 44.8h-44.8V588.8c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v121.6h-44.8c-25.6 0-44.8-19.2-44.8-44.8v-192c0-25.6 19.2-44.8 44.8-44.8h614.4c25.6 0 44.8 19.2 44.8 44.8v192z"></path></svg></button></div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/article/springs/SpringCloud/%E5%88%86%E5%B8%83%E5%BC%8F%E5%90%84%E7%BB%84%E4%BB%B6/%E6%A6%82%E8%BF%B0-%E5%B7%B2%E5%8F%91%E5%B8%83.html#组件概述" class="router-link-active router-link-exact-active toc-link level1">组件概述</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/article/springs/SpringCloud/%E5%88%86%E5%B8%83%E5%BC%8F%E5%90%84%E7%BB%84%E4%BB%B6/%E6%A6%82%E8%BF%B0-%E5%B7%B2%E5%8F%91%E5%B8%83.html#写在前面" class="router-link-active router-link-exact-active toc-link level1">写在前面</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/article/springs/SpringCloud/%E5%88%86%E5%B8%83%E5%BC%8F%E5%90%84%E7%BB%84%E4%BB%B6/%E6%A6%82%E8%BF%B0-%E5%B7%B2%E5%8F%91%E5%B8%83.html#服务注册" class="router-link-active router-link-exact-active toc-link level1">服务注册</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/article/springs/SpringCloud/%E5%88%86%E5%B8%83%E5%BC%8F%E5%90%84%E7%BB%84%E4%BB%B6/%E6%A6%82%E8%BF%B0-%E5%B7%B2%E5%8F%91%E5%B8%83.html#服务调用与负载均衡" class="router-link-active router-link-exact-active toc-link level1">服务调用与负载均衡</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/article/springs/SpringCloud/%E5%88%86%E5%B8%83%E5%BC%8F%E5%90%84%E7%BB%84%E4%BB%B6/%E6%A6%82%E8%BF%B0-%E5%B7%B2%E5%8F%91%E5%B8%83.html#服务降级与熔断限流" class="router-link-active router-link-exact-active toc-link level1">服务降级与熔断限流</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/article/springs/SpringCloud/%E5%88%86%E5%B8%83%E5%BC%8F%E5%90%84%E7%BB%84%E4%BB%B6/%E6%A6%82%E8%BF%B0-%E5%B7%B2%E5%8F%91%E5%B8%83.html#服务网关" class="router-link-active router-link-exact-active toc-link level1">服务网关</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/article/springs/SpringCloud/%E5%88%86%E5%B8%83%E5%BC%8F%E5%90%84%E7%BB%84%E4%BB%B6/%E6%A6%82%E8%BF%B0-%E5%B7%B2%E5%8F%91%E5%B8%83.html#服务配置中心" class="router-link-active router-link-exact-active toc-link level1">服务配置中心</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/article/springs/SpringCloud/%E5%88%86%E5%B8%83%E5%BC%8F%E5%90%84%E7%BB%84%E4%BB%B6/%E6%A6%82%E8%BF%B0-%E5%B7%B2%E5%8F%91%E5%B8%83.html#消息总线" class="router-link-active router-link-exact-active toc-link level1">消息总线</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/article/springs/SpringCloud/%E5%88%86%E5%B8%83%E5%BC%8F%E5%90%84%E7%BB%84%E4%BB%B6/%E6%A6%82%E8%BF%B0-%E5%B7%B2%E5%8F%91%E5%B8%83.html#消息驱动" class="router-link-active router-link-exact-active toc-link level1">消息驱动</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/article/springs/SpringCloud/%E5%88%86%E5%B8%83%E5%BC%8F%E5%90%84%E7%BB%84%E4%BB%B6/%E6%A6%82%E8%BF%B0-%E5%B7%B2%E5%8F%91%E5%B8%83.html#链路追踪" class="router-link-active router-link-exact-active toc-link level1">链路追踪</a></li><!----><!--]--></ul></div></aside></div><!----><div class="theme-hope-content"><h1 id="组件概述" tabindex="-1"><a class="header-anchor" href="#组件概述" aria-hidden="true">#</a> 组件概述</h1><h1 id="写在前面" tabindex="-1"><a class="header-anchor" href="#写在前面" aria-hidden="true">#</a> 写在前面</h1><p>以下内容是对分布式架构中各个组件的概述，可能还有不完善的地方，之后还会继续补充</p><br><h1 id="服务注册" tabindex="-1"><a class="header-anchor" href="#服务注册" aria-hidden="true">#</a> 服务注册</h1><ul><li>注册中心记录了服务和服务地址的映射关系</li><li>注册中心给客户端提供可调用的服务列表，客户端就可以进行远程调用</li><li>注册中心是整个服务调用的核心，是分布式系统中必要的组件</li><li>注册中心分为两大类： <ul><li>临时实例：发送心跳告诉注册中心服务存活</li><li>永久实例：通过 API 填写客户端信息，注册中心会主动检测客户端是否在线（不在线也不会去掉）</li></ul></li></ul><p><strong>常见的注册中心：</strong></p><table><thead><tr><th style="text-align:center;">序号</th><th style="text-align:center;">名称</th><th style="text-align:center;">说明</th></tr></thead><tbody><tr><td style="text-align:center;">1</td><td style="text-align:center;">Eureka</td><td style="text-align:center;">Netflix 已经停止维护</td></tr><tr><td style="text-align:center;">2</td><td style="text-align:center;">Zookeeper</td><td style="text-align:center;">Apache 旗下，Hadoop 项目下的一个子项目</td></tr><tr><td style="text-align:center;">4</td><td style="text-align:center;">Consul</td><td style="text-align:center;">Go 语言编写的，与 Eureka 相似</td></tr><tr><td style="text-align:center;">5</td><td style="text-align:center;">Nacos</td><td style="text-align:center;">Alibaba 旗下</td></tr></tbody></table><p><strong>主要注册中心功能对比：</strong></p><table><thead><tr><th style="text-align:center;">功能</th><th style="text-align:center;">Eureka</th><th style="text-align:center;">Consul</th><th style="text-align:center;">Nacos</th></tr></thead><tbody><tr><td style="text-align:center;">配置中心功能</td><td style="text-align:center;">不支持</td><td style="text-align:center;">支持，但是用起来偏麻烦，不太符合 Spring Boot 框架的命名风格，支持动态刷新</td><td style="text-align:center;">支持，用起来简单，符合 SpringBoot 的命名风格，支持动态刷新</td></tr><tr><td style="text-align:center;">依赖</td><td style="text-align:center;">依赖 Zookeeper</td><td style="text-align:center;">不依赖其他组件</td><td style="text-align:center;">不依赖其他组件</td></tr><tr><td style="text-align:center;">应用内/外</td><td style="text-align:center;">直接集成到应用中，依赖于应用自身完成服务的注册与发现</td><td style="text-align:center;">属于外部应用，侵入性小</td><td style="text-align:center;">属于外部应用，侵入性小</td></tr><tr><td style="text-align:center;">ACP 原则</td><td style="text-align:center;">遵循 AP 原则，有较强的可用性，服务注册块，单牺牲了一定的一致性</td><td style="text-align:center;">遵循 CP 原则服务注册稍慢，由于其一致性导致了在 leader 挂掉重新选举期间整个 Consul 不可用</td><td style="text-align:center;">通知遵循 CP 原则和 AP 原则</td></tr><tr><td style="text-align:center;">版本迭代</td><td style="text-align:center;">目前已经不进行升级</td><td style="text-align:center;">目前仍然进行版本迭代</td><td style="text-align:center;">目前仍然进行版本迭代</td></tr><tr><td style="text-align:center;">集成支持</td><td style="text-align:center;">只支持 SpringCloud 集成</td><td style="text-align:center;">支持 SpringCloud、K8S 集成</td><td style="text-align:center;">支持 Dubbo、SpringCloud、K8S 集成</td></tr><tr><td style="text-align:center;">访问协议</td><td style="text-align:center;">HTPP</td><td style="text-align:center;">HTTP/DNS</td><td style="text-align:center;">HTTP/动态DNS/UDP</td></tr><tr><td style="text-align:center;">雪崩保护</td><td style="text-align:center;">支持</td><td style="text-align:center;">不支持</td><td style="text-align:center;">支持</td></tr><tr><td style="text-align:center;">界面</td><td style="text-align:center;">英文界面</td><td style="text-align:center;">英文界面，不符合国人习惯</td><td style="text-align:center;">中文界面</td></tr><tr><td style="text-align:center;">上手</td><td style="text-align:center;">容易</td><td style="text-align:center;">复杂一点</td><td style="text-align:center;">极易，中文文档，案例，社区活跃</td></tr></tbody></table><br><h1 id="服务调用与负载均衡" tabindex="-1"><a class="header-anchor" href="#服务调用与负载均衡" aria-hidden="true">#</a> 服务调用与负载均衡</h1><p><strong>服务调用：</strong></p><ul><li><p>各个微服务之间需要通过网络进行远程调用其他服务的接口</p></li><li><p>RESTful 风格的网络请求是常见的交互方式</p></li></ul><p><strong>负载均衡：</strong></p><ul><li>将接口分摊到多个服务上减轻单个服务的压力</li><li>负载均衡的具体算法实现有多种</li><li>负载均衡分为客户端（如：Ribbon）和服务端（如：Nginx、F5）两种</li></ul><p>注：OpenFeign 和较新版的 Spring Cloud Eureka 默认集成了 Ribbon</p><p><strong>常见的服务调用组件：</strong></p><table><thead><tr><th style="text-align:center;">序号</th><th style="text-align:center;">名称</th><th style="text-align:center;">说明</th></tr></thead><tbody><tr><td style="text-align:center;">1</td><td style="text-align:center;">Ribbon</td><td style="text-align:center;">Netflix 已经停止维护</td></tr><tr><td style="text-align:center;">2</td><td style="text-align:center;">Feign/OpenFeign</td><td style="text-align:center;">声明式的web service客户端，内置 Ribbon</td></tr><tr><td style="text-align:center;">3</td><td style="text-align:center;">Dubbo</td><td style="text-align:center;">Apache 旗下，RPC 服务开发框架</td></tr></tbody></table><br><h1 id="服务降级与熔断限流" tabindex="-1"><a class="header-anchor" href="#服务降级与熔断限流" aria-hidden="true">#</a> 服务降级与熔断限流</h1><p><strong>服务雪崩：</strong></p><ul><li>多个微服务之间调用可能形成多条调用链，如果扇出的链路上某个微服务的响应时间太长或者服务不可用，那么最开始的服务就会占用越来越多的系统资源，进而引入系统崩溃</li><li>对于高流量的应用来说，单一的后端依赖可能会导致所有服务器上的所有资源在几秒钟之内饱和</li><li>比失败更糟糕的情况是导致服务之间的延迟增加、备份队列、线程和其他系统资源紧张，导致整个系统发生更多的级联故障</li><li>对于这些故障和延迟都需要进行隔离和管理</li></ul><p><strong>熔断限流的作用：</strong></p><p>当前系统资源不够的情况下，不足以应对大量的用户请求，为了保证剩余的资源能够提供服务，系统应该按照对流量或者功能做出一定限制</p><ul><li><p>增加容错率：发生错误请求或者超时时，阻止其调用接口，直接调用本地的 fallback</p></li><li><p>当并发度超过服务能承受的极限时熔断报错</p></li><li><p>不使用熔断时，如果服务端发生错误，客户端会接收到错误状态的 Response，此时程序处理不当可能会抛异常，严重可能导致其他服务不可用</p></li><li><p>可以一定程度避免浪费其他系统资源</p></li></ul><p><strong>常用的熔断限流组件：</strong></p><table><thead><tr><th style="text-align:center;">序号</th><th style="text-align:center;">名称</th><th style="text-align:center;">说明</th></tr></thead><tbody><tr><td style="text-align:center;">1</td><td style="text-align:center;">Hystrix</td><td style="text-align:center;">设计优秀，但是已经停止维护</td></tr><tr><td style="text-align:center;">2</td><td style="text-align:center;">Sentinel</td><td style="text-align:center;">独立的组件，有 Web 界面，可以更加细粒度地配置</td></tr></tbody></table><br><h1 id="服务网关" tabindex="-1"><a class="header-anchor" href="#服务网关" aria-hidden="true">#</a> 服务网关</h1><p><strong>API 网关在微服务架构中提供（列举部分）：</strong></p><ul><li>路由转发</li><li>认证鉴权</li><li>限流</li></ul><p><strong>网关的作用：</strong></p><ul><li>让客户端统一访问接口</li><li>隐藏服务的内部接口</li><li>可以添加一个额外的保护层防止恶意攻击</li><li>可以对所有请求进行权限校验</li><li>可以记录访问日志并审计</li></ul><p><strong>常用的网关组件：</strong></p><table><thead><tr><th style="text-align:center;">序号</th><th style="text-align:center;">名称</th><th style="text-align:center;">说明</th></tr></thead><tbody><tr><td style="text-align:center;">1</td><td style="text-align:center;">Zuul</td><td style="text-align:center;">Netflix 开源项目，已经停止维护</td></tr><tr><td style="text-align:center;">2</td><td style="text-align:center;">Spring Cloud Gateway</td><td style="text-align:center;">用于替代 Zuul</td></tr><tr><td style="text-align:center;">3</td><td style="text-align:center;">KONG</td><td style="text-align:center;">通过 lua-nginx-module 实现的在 nginx 中运行的 lua 应用程序</td></tr></tbody></table><br><h1 id="服务配置中心" tabindex="-1"><a class="header-anchor" href="#服务配置中心" aria-hidden="true">#</a> 服务配置中心</h1><p><strong>管理各个环境的配置文件参数，如：</strong></p><ul><li>数据库</li><li>缓存</li><li>存储</li><li>业务应用</li></ul><p><strong>配置中心的作用：</strong></p><ul><li><p>本地配置在服务启动时加载，此后修改配置可以不用重启服务</p></li><li><p>不适用配置中心时多个环境（prod、dev、sit、uat）的配置可能混乱</p></li><li><p>使用配置中心时，如果出现配置错误可以比较容易的回滚到指定版本</p></li><li><p>为微服务提供集中化的外部配置支持，配置服务器为各个不同的微服务应用的所有环境提供一个中心化的外部配置</p></li><li><p>配置中心支持动态化的配置更新，可以分环境部署</p></li><li><p>运行期间可以动态调整配置，不需要在每个服务部署的机器上编写配置文件，服务会向配置中心统一拉取配置自己的信息</p></li><li><p>当配置发生改动时，服务不需要重启即可感知到配置的变化并应用新的配置</p></li><li><p>配置信息以 RESTful 风格的接口暴露</p></li></ul><p><strong>配置文件分级：</strong></p><ul><li><code>application.yml</code> 是用户级的资源配置项；<code>bootstrap.yml</code> 是系统级的配置项，优先级更高</li><li>Spring Cloud 会创建一个 <code>Bootstrap Context</code> 作为 Spring 应用的 <code>Application Context</code> 的父上下文；两个上下文共享一个从外部获取的 <code>Environment</code></li><li>初始化时 <code>Bootstrap Context</code> 负责从外部源加载配置属性并解析配置</li><li>两个上下文有着不同的约定，保证它们之间的配置分离</li><li><code>Bootstrap Context</code> 属性有高优先级，默认情况下不会被本地配置覆盖</li><li>跟配置中心对接的客户端中的配置文件需要改成 <code>bootstrap.yml</code></li></ul><p><strong>常用配置中心及其功能对比：</strong></p><table><thead><tr><th style="text-align:center;">功能</th><th style="text-align:center;">Spring Cloud Config</th><th style="text-align:center;">Apollo</th><th style="text-align:center;">Nacos</th></tr></thead><tbody><tr><td style="text-align:center;">实效性</td><td style="text-align:center;">Spring Cloud Bus</td><td style="text-align:center;">HTTP长轮询</td><td style="text-align:center;">HTTP长轮询</td></tr><tr><td style="text-align:center;">权限控制</td><td style="text-align:center;">支持</td><td style="text-align:center;">支持</td><td style="text-align:center;">支持</td></tr><tr><td style="text-align:center;">灰度发布</td><td style="text-align:center;">支持</td><td style="text-align:center;">支持</td><td style="text-align:center;">不支持</td></tr><tr><td style="text-align:center;">版本管理</td><td style="text-align:center;">支持</td><td style="text-align:center;">支持</td><td style="text-align:center;">支持</td></tr><tr><td style="text-align:center;">版本回滚</td><td style="text-align:center;">支持</td><td style="text-align:center;">支持</td><td style="text-align:center;">支持</td></tr><tr><td style="text-align:center;">多环境支持</td><td style="text-align:center;">支持</td><td style="text-align:center;">支持</td><td style="text-align:center;">支持</td></tr></tbody></table><br><h1 id="消息总线" tabindex="-1"><a class="header-anchor" href="#消息总线" aria-hidden="true">#</a> 消息总线</h1><ul><li>这里说的是 <code>Spring Cloud Bus</code></li><li>在微服务架构的系统中，通常会使用轻量级的消息代理来构建一个公用的消息主题，并让系统中所有微服务实例都链接上来。由于该主题中产生的消息会被所有实例监听和消费，所以称之为消息总线</li><li>基本原理是客户端实例都会监听消息队列中的同一个 <code>topic</code>（默认是 <code>Spring Cloud Bus</code>），当一个服务刷新数据时，它会把这个消息放到该主题中，这样其他监听同一个主题的服务就能得到新的通知，并更新自身的状态</li><li>可以配合 <code>Spring Cloud Config</code> 实现真正的动态配置刷新</li><li>支持两种消息代理：<code>RabbitMQ</code> 和 <code>Kafaka</code></li><li><code>Spring Cloud Bus</code> 是将分布式系统的节点与轻量级消息系统链接起来的框架，整合了 Java 事件处理机制和消息中间件的功能</li><li>能够管理和传播分布式系统间的消息，就像一个分布式执行器，可以用于广播状态更改、事件推送等，也可以作为微服务间的通信通道</li></ul><p><strong>两种触发方式：</strong></p><ul><li><p>利用消息总线触发一个客户端 <code>/bus/refresh</code> 端点从而刷新所有客户端的配置</p></li><li><p>利用消息总线触发一个服务端 <code>/bus/refresh</code> 端点从而刷新所有客户端的配置</p></li><li><p>注意：需要给配置中心的服务端和客户端都加上消息总线的支持</p></li></ul><p><strong>使用客户端通知的弊端：</strong></p><ul><li>打破了微服务的职责单一性，因为客户端本身是业务模块，本就不应该承担配置刷新的职责</li><li>破坏了微服务个节点的平衡性</li><li>存在其他的局限性，如微服务在迁移的时候，网络地址是常常发生改变的，如果这时候想要刷新可能需要更多的修改</li></ul><br><h1 id="消息驱动" tabindex="-1"><a class="header-anchor" href="#消息驱动" aria-hidden="true">#</a> 消息驱动</h1><ul><li><p>这里说的是 <code>Spring Cloud Stream</code></p></li><li><p>构建消息驱动微服务的框架，屏蔽底层消息中间件的差异，降低切换成本，统一消息的编程模型</p></li><li><p>应用程序通过 inputs 或者 outputs 来与 Spring Cloud Stream 中的 binder 对象交互</p></li><li><p>binder 对象负责与消息中间件交互，我们只需要配置绑定即可，即只需要搞清楚如何与 Stream 交互就可以方便使用消息驱动的方式</p></li><li><p>通过 Spring Integration 来连接消息代理中间件以实现消息事件驱动</p></li><li><p>Stream 为一些供应商的消息中间件产品提供了个性化的自动化配置实现，引用了发布-订阅、消费组、分区的三个核心概念</p></li></ul><p><strong>引入了 Stream 之后：</strong></p><ul><li>Stream 完成了大一统的任务（虽然现在只能选择 RabbitMQ 或者 Kafaka）</li><li>绑定器作为中间层能够完美实现应用程序与消息中间件之间细节的隔离，通过向应用程序暴露统一的 Channel，使得应用程序之间不需要再考虑各种不同的消息中间件的实现</li></ul><p><strong>Stream 标准流程：</strong></p><ul><li>Binder：方便连接中间件，可以屏蔽差异</li><li>Channel：对 Queue 的一种抽象，在消息通讯系统中就是实现存储和转发的媒介，通过 Channel 对队列进行配置</li><li>Source 和 Sink：可以理解为参照对象是 Stream 自身，从 Stream 发布消息就是输出，接收消息就是输入</li></ul><br><h1 id="链路追踪" tabindex="-1"><a class="header-anchor" href="#链路追踪" aria-hidden="true">#</a> 链路追踪</h1><p>调用链：分布式系统中用于追踪用户的请求过程，包括：</p><ul><li>数据采集</li><li>数据传输</li><li>数据存储</li><li>数据分析</li><li>数据可视化展示</li></ul><p><strong>链路追踪的作用：</strong></p><ul><li>调用链可以用于微服务代码的调式和服务监控，可以帮助改善性能和缺陷</li><li>分布式系统中一次请求可能经过多个模块、中间件、服务器实例，这些请求还有可能是并发的，使用链路追踪就可以确定这些过程的先后顺序</li><li>主要是可以在日益复杂的业务系统中快速地定位问题所在</li></ul><p><strong>常用链路追踪组件：</strong></p><table><thead><tr><th style="text-align:center;">序号</th><th style="text-align:center;">名称</th><th style="text-align:center;">说明</th></tr></thead><tbody><tr><td style="text-align:center;">1</td><td style="text-align:center;">SkyWalking</td><td style="text-align:center;">追踪、监控、诊断分布式系统</td></tr><tr><td style="text-align:center;">2</td><td style="text-align:center;">Zipkin</td><td style="text-align:center;">通过一系列拦截器采集数据监控系统性能</td></tr><tr><td style="text-align:center;">3</td><td style="text-align:center;">Spring Cloud Sleuth</td><td style="text-align:center;">官方整合，兼容了 Zipkin</td></tr><tr><td style="text-align:center;">4</td><td style="text-align:center;">Pinpoint</td><td style="text-align:center;">无入侵的轻量 APM 监控工具</td></tr></tbody></table><br></div><!----><footer class="page-meta"><!----><div class="meta-item git-info"><div class="update-time"><span class="label">Last update: </span><!----></div><div class="contributors"><span class="label">Contributors: </span><!--[--><!--[--><span class="contributor" title="email: 1627121193@qq.com">格兹沃</span><!--]--><!--]--></div></div></footer><nav class="page-nav"><a href="/article/springs/SpringCloud/%E5%88%86%E5%B8%83%E5%BC%8F%E5%90%84%E7%BB%84%E4%BB%B6/%E5%88%86%E5%B8%83%E5%BC%8F%E6%9E%B6%E6%9E%84%E4%B8%AD%E5%90%84%E7%BB%84%E4%BB%B6%E7%AE%80%E8%BF%B0.html" class="nav-link prev" aria-label="分布式架构中各组件简述"><div class="hint"><span class="arrow start"></span>Prev</div><div class="link"><FontIcon></FontIcon>分布式架构中各组件简述</div></a><!----></nav><div class="giscus-wrapper input-top" id="comment" style="display:block;"><div style="text-align:center">Loading...</div></div><!----><!--]--></main><div data-v-717f1b97></div></div><!--]--><!----></div><!--]--><!--]--><!----><div id="pwa-install"><!----><div id="install-modal-wrapper" style="display:none;"><div class="background"></div><div class="install-modal"><div class="header"><button class="close-button" aria-label="Close"><svg xmlns="http://www.w3.org/2000/svg" class="icon close-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="close icon"><path d="M589.654 511.965 1007.212 84.22a49.777 49.777 0 0 0-.73-70.02 49.046 49.046 0 0 0-69.687.665L519.967 441.946 85.882 14.2a49.08 49.08 0 0 0-69.687.664 49.777 49.777 0 0 0 .664 70.019l433.454 427.082L16.859 939.048a49.777 49.777 0 0 0-.664 70.019 49.013 49.013 0 0 0 69.687.663l434.085-427.746 416.828 427.083A49.013 49.013 0 0 0 972.037 1024a48.416 48.416 0 0 0 34.512-14.27 49.777 49.777 0 0 0 .73-70.019z"></path></svg></button><div class="logo"><!----><div class="title"><h1></h1><p class="desc">This app can be installed on your PC or mobile device.  This will allow this web app to look and behave like any other installed app.  You will find it in your app lists and be able to pin it to your home screen, start menus or task bars.  This installed web app will also be able to safely interact with other apps and your operating system. </p></div></div></div><div class="content"><div class="highlight"><!----><!----></div><div class="description"><h3>Description</h3><p></p></div></div><div class="button-wrapper"><button class="install-button">Install<span></span></button><button class="cancel-button">Cancel</button></div></div></div></div><!----><!--]--></div>
    <script type="module" src="/assets/app-f746a503.js" defer></script>
  </body>
</html>
