---
title: "缓存进阶"
shortTitle: "缓存进阶"
description: "缓存进阶"
icon: "缓存进阶"
author: 
  name: gzw
  url: 
  email: 1627121193@qq.com
isOriginal: false
date: 2022-02-27
category: 
- "redis"
- "数据库"
- "缓存"
tag:
- "redis"
- "数据库"
- "缓存"
sticky: 1
star: false
article: true
timeline: true,
dir:
  text: "缓存进阶"
  icon: ""
  collapsible: true
  index: true
  comment: true
headerDepth: 3
index: true
order: 2
copy:
  triggerWords: 100
  disableCopy: false
  disableSelection: false
feed:
  title: "缓存进阶"
  description: "缓存进阶"
  author:
    name: gzw
    email: 1627121193@qq.com
---






# 缓存进阶



本地缓冲，是对于单体应用而言的

分布式系统中不要使用本地缓冲，而是要对应使用分布式缓存



```xml
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-data-redis</artifactId>
    <exclusions>
        <exclusion>
            <groupId>io.lettuce</groupId>
            <artifactId>lettuce-core</artifactId>
        </exclusion>
    </exclusions>
</dependency>

<dependency>
    <groupId>redis.clients</groupId>
    <artifactId>jedis</artifactId>
</dependency>
```





注意点：

Spring Boot 2.0 之后默认使用 lettuce 作为操作 Redis 的客户端，而 lettuce 是使用 Netty 进行网络通信的，lettuce 的某些 bug 会导致 Netty 堆外内存溢出

Netty 启动时不指定堆外内存时，就会默认使用服务启动时指定的 `-Xmx=...` 作为堆外内存

可以升级 lettuce 客户端或者切换为 Jedis 作为客户端解决上述提到的问题

